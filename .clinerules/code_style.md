- Follow TDD! Always write unit and integration tests first and them implement the feature. Run all tests after a new implementation and reiterate if any test fails.
- Strictly follow PEP 8 conventions
- Never use relative imports
- Prefer **small, composable modules** over a big monolith.
- Write small functions with maximum 10 lines of code!
- Never any "#" comment. Docs string only for API function!
- Where possible, provide **type hints** and basic tests (pytest) for core logic (parsing, extraction).
- Make sure variables, functions, class and files have descriptive names such that anybody not too familiar with code can assume what they do!
- Keep local-mode as the default:
  - The project should be usable on an M1 laptop with only **Ollama, Redis, SQLite** and `poetry install`.
- All secrets (API keys) must be read from env variables or a local `.env` file (ignored by git).
- Avoid vendor lock-in and keep code open for extension: wrap LLM calls in simple adapter classes (`QwenLocalClient`, `DeepSeekClient`, `KimiClient`).
- For Celery tasks, keep them:
  - Idempotent where possible.
  - Logged (start/end, prompt counts, errors).
